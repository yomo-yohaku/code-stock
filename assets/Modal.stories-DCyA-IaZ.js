import{c as s}from"./index-B7OfYWdg.js";const o=`<div class="tw:p-[40px]">
  <p
    class="tw:font-bold tw:text-[16px] tw:md:text-[24px] tw:mb-[16px] tw:md:mb-[24px] tw:text-center"
  >
    モダール（モーダルの高さより要素が多い時はスクロールバーを表示）
  </p>
  <p
    class="tw:font-bold tw:text-[14px] tw:md:text-[16px] tw:mb-[24px] tw:md:mb-[32px] tw:text-center tw:text-orange-500"
  >
    ※ モーダルOPENボタン（.c-button-inversion）を使用
  </p>

  <div class="tw:max-w-[320px] tw:mx-auto">
    <button class="c-button-inversion js-button" data-modal-target="#modal-1">
      モーダルOPEN 1
    </button>
  </div>

  <div class="p-modal-bg js-modal-bg" data-modal-bg="#modal-1"></div>

  <dialog class="p-modal js-modal" id="modal-1" aria-label="〇〇のモーダル 1">
    <div class="p-modal__inner">
      <div class="p-modal__contents-wrap js-contents">
        <div class="p-modal__contents">
          <button class="p-modal__close-button js-close-button">
            <span class="tw:sr-only">閉じる</span>
          </button>
          <div class="tw:flex tw:flex-col tw:gap-[40px]">
            <p>モーダル 1</p>
            <p class="tw:leading-[1.6]">
              ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
            </p>
          </div>
        </div>
      </div>
    </div>
  </dialog>

  <div class="tw:max-w-[320px] tw:mx-auto tw:mt-5">
    <button class="c-button-inversion js-button" data-modal-target="#modal-2">
      モーダルOPEN 2
    </button>
  </div>

  <div class="p-modal-bg js-modal-bg" data-modal-bg="#modal-2"></div>

  <dialog class="p-modal js-modal" id="modal-2" aria-label="〇〇のモーダル 2">
    <div class="p-modal__inner">
      <div class="p-modal__contents-wrap js-contents">
        <div class="p-modal__contents">
          <button class="p-modal__close-button js-close-button">
            <span class="tw:sr-only">閉じる</span>
          </button>
          <div class="tw:flex tw:flex-col tw:gap-[40px]">
            <p>モーダル 2</p>
            <p class="tw:leading-[1.6]">
              ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
            </p>
            <p class="tw:leading-[1.6]">
              ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
            </p>
            <p class="tw:leading-[1.6]">
              ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
            </p>
            <p class="tw:leading-[1.6]">
              ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
            </p>
          </div>
        </div>
      </div>
    </div>
  </dialog>

  <div class="tw:flex tw:flex-col tw:gap-[40px] tw:mt-[40px]">
    <p class="tw:leading-[1.6]">
      ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
    </p>

    <p class="tw:leading-[1.6]">
      ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
    </p>

    <p class="tw:leading-[1.6]">
      ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。ここに内容が入ります。
    </p>
  </div>
</div>
`,e=`.p-modal-bg {
  position: fixed;
  top: 0;
  left: 0;
  display: none;
  width: 100%;
  height: 100%;
  content: "";
  background: rgba(0, 0, 0, 0.4);
  opacity: 0;
}

.p-modal {
  width: 100%;
  max-width: none;
  height: 100%;
  max-height: none;
  background-color: transparent;
  border: none;
}

.p-modal::backdrop {
  background-color: transparent;
}

.p-modal__inner {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.p-modal__contents-wrap {
  position: relative;
  width: 90%;
  max-width: 800px;
  padding: 16px;
  padding-bottom: 32px;
  background-color: #fff;
  border-radius: 8px;
  opacity: 0;
}

.p-modal__contents {
  max-height: 80vh;
  padding-inline: 24px;
  margin-top: 40px;
  overflow-y: auto;
}

.p-modal__close-button {
  position: absolute;
  top: 6px;
  right: 6px;
  z-index: 102;
  width: 34px;
  height: 34px;
  background-color: #e5e7eb;
  border-radius: 50%;
  transition: background-color 0.3s;
}

.p-modal__close-button::before,
.p-modal__close-button::after {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  display: block;
  width: 16px;
  height: 2px;
  margin: auto;
  content: "";
  background-color: #000;
}

.p-modal__close-button::before {
  transform: rotate(45deg);
}

.p-modal__close-button::after {
  transform: rotate(-45deg);
}
`,a=`const modal = () => {
  const buttons = document.querySelectorAll(".js-button");
  const modals = document.querySelectorAll(".js-modal");
  const modalBgs = document.querySelectorAll(".js-modal-bg");
  const closeButtons = document.querySelectorAll(".js-close-button");

  // モーダルが一つもない場合は処理を終了
  if (buttons.length === 0 || modals.length === 0) return;

  // コンテンツ Opening Keyframe
  const contentsOpeningKeyframes = {
    opacity: [0, 1],
    transform: ["scale(0.98)", "scale(1)"],
  };

  // 背景 Opening Keyframe
  const bgOpeningKeyframes = {
    opacity: [0, 1],
  };

  // コンテンツ Opening Option
  const contentsOpeningOptions = {
    duration: 300,
    easing: "ease-out",
    fill: "forwards",
  };

  // 背景 Opening Option
  const bgOpeningOptions = {
    duration: 150,
    easing: "ease-out",
    fill: "forwards",
  };

  // コンテンツ Closing Keyframe
  const contentsClosingKeyframes = {
    opacity: [1, 0],
    transform: ["scale(1)", "scale(0.98)"],
  };

  // 背景 Closing Keyframe
  const bgClosingKeyframes = {
    opacity: [1, 0],
  };

  // コンテンツ Closing Option
  const contentsClosingOptions = {
    duration: 300,
    easing: "ease-out",
    fill: "forwards",
  };

  // 背景 Closing Option
  const bgClosingOptions = {
    duration: 150,
    easing: "ease-out",
    fill: "forwards",
  };

  /**
   * 特定のモーダルを開く関数
   * @param {HTMLElement} targetModal - 開く対象の <dialog> 要素
   * @param {HTMLElement} targetBg - 開く対象の背景要素
   */
  const openModal = (targetModal, targetBg) => {
    // 関連するコンテンツ要素も取得
    const modalContents = targetModal.querySelector(".js-contents");

    targetModal.showModal();
    modalContents.animate(contentsOpeningKeyframes, contentsOpeningOptions);
    targetBg.style.display = "block";
    targetBg.animate(bgOpeningKeyframes, bgOpeningOptions);

    // Escapeキーのデフォルト動作を抑止
    targetModal.focus(); // フォーカスを移動させてEscapeキーのイベントリスナーをモーダルに集中させる
  };

  /**
   * 特定のモーダルを閉じる関数
   * @param {HTMLElement} targetModal - 閉じる対象の <dialog> 要素
   * @param {HTMLElement} targetBg - 閉じる対象の背景要素
   */
  const closeModal = (targetModal, targetBg) => {
    const modalContents = targetModal.querySelector(".js-contents");

    // modalContentsがない場合は即座に閉じる
    if (!modalContents) {
      targetModal.close();
      targetBg.style.display = "none";
      return;
    }

    const closingAnim = modalContents.animate(
      contentsClosingKeyframes,
      contentsClosingOptions,
    );
    targetBg.animate(bgClosingKeyframes, bgClosingOptions);

    // アニメーションの完了後
    closingAnim.onfinish = () => {
      targetModal.close();
      targetBg.style.display = "none";
    };
  };

  // --- イベントリスナーの設定 ---

  // 1. 全てのOPENボタンにイベントを設定
  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const targetId = button.dataset.modalTarget; // data-modal-target="#modal-1"
      const targetModal = document.querySelector(targetId);
      const targetBg = document.querySelector(
        \`.js-modal-bg[data-modal-bg="\${targetId}"]\`,
      );

      if (targetModal && targetBg) {
        openModal(targetModal, targetBg);
      }
    });
  });

  // 2. 全てのCLOSEボタンにイベントを設定
  closeButtons.forEach((closeButton) => {
    closeButton.addEventListener("click", () => {
      // 親要素を辿って関連するモーダルと背景を見つける
      const targetModal = closeButton.closest(".js-modal");
      if (targetModal) {
        const targetBg = document.querySelector(
          \`.js-modal-bg[data-modal-bg="#\${targetModal.id}"]\`,
        );
        if (targetBg) {
          closeModal(targetModal, targetBg);
        }
      }
    });
  });

  // 3. 全てのモーダルの背景クリックでCLOSE
  modals.forEach((modalItem) => {
    modalItem.addEventListener("click", (event) => {
      // モーダルコンテンツ外のクリックかチェック
      if (event.target.closest(".js-contents") === null) {
        const targetBg = document.querySelector(
          \`.js-modal-bg[data-modal-bg="#\${modalItem.id}"]\`,
        );
        if (targetBg) {
          closeModal(modalItem, targetBg);
        }
      }
    });

    // 4. Escapeキーを押すと非表示
    // <dialog>要素自体にリスナーを設定することで、開いているダイアログのみを対象にする
    modalItem.addEventListener("keydown", function (event) {
      if (event.key === "Escape") {
        event.preventDefault();
        const targetBg = document.querySelector(
          \`.js-modal-bg[data-modal-bg="#\${modalItem.id}"]\`,
        );
        if (targetBg) {
          closeModal(modalItem, targetBg);
        }
      }
    });
  });
};

modal();
`,d={title:"Project/Modal"},n={render:()=>{const t=document.createElement("div");return t.innerHTML=`
      <style>${e}${s}</style>
      ${o}
    `,requestAnimationFrame(()=>{new Function(a)()}),t},parameters:{sourceCode:[{name:"HTML",code:o},{name:"CSS",code:e},{name:"JavaScript",code:a}]}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  render: () => {
    const container = document.createElement("div");
    container.innerHTML = \`
      <style>\${cssModal01}\${cssButtonInversion}</style>
      \${modal01}
    \`;
    requestAnimationFrame(() => {
      new Function(jsModal01)();
    });
    return container;
  },
  parameters: {
    sourceCode: [{
      name: "HTML",
      code: modal01
    }, {
      name: "CSS",
      code: cssModal01
    }, {
      name: "JavaScript",
      code: jsModal01
    }]
  }
}`,...n.parameters?.docs?.source}}};const r=["Modal01"];export{n as Modal01,r as __namedExportsOrder,d as default};
